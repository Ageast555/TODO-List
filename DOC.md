# TODO List 项目说明文档

## 1. 技术选型

### 前端框架
- **Vue 3**：采用 Composition API，理由：
  - 更好的 TypeScript 支持（虽然本项目未使用 TS）
  - 更灵活的逻辑复用方式
  - 更好的性能优化（响应式系统重构）
  - 组件化开发，代码结构清晰

### UI 组件库
- **Ant Design Vue 4.0**：理由：
  - 企业级 UI 组件，开箱即用
  - 丰富的组件生态（表单、日期选择器、消息提示等）
  - 统一的视觉风格，减少样式开发时间
  - 良好的文档和社区支持

### 构建工具
- **Vite 4.5**：理由：
  - 极速的开发服务器启动
  - 基于 ESM 的热更新，开发体验好
  - 生产构建使用 Rollup，打包体积小
  - 相比 Webpack 配置更简单

### 日期处理
- **Day.js**：理由：
  - 轻量级（仅 2KB），相比 Moment.js 体积小
  - API 与 Moment.js 兼容，学习成本低
  - 支持链式调用，代码简洁
  - 替代方案：原生 Date API（功能有限）、Moment.js（体积大）

### 数据存储
- **localStorage**：理由：
  - 浏览器原生 API，无需额外依赖
  - 数据持久化简单，适合单机应用
  - 存储容量足够（通常 5-10MB）
  - 替代方案：
    - IndexedDB：适合更复杂的数据结构，但实现复杂
    - 后端数据库：需要服务器，增加部署成本

## 2. 项目结构设计

### 整体架构
本项目采用单页应用（SPA）架构，纯前端实现，数据存储在浏览器本地。

```
src/
├── components/          # 组件目录
│   ├── Sidebar.vue     # 左侧导航栏组件（分类筛选）
│   ├── TodoItem.vue    # 待办事项项组件（展示单个待办）
│   └── TodoForm.vue    # 表单组件（添加/编辑待办）
├── utils/              # 工具函数目录
│   └── storage.js      # 数据持久化工具（localStorage 封装）
├── App.vue             # 主应用组件（状态管理、业务逻辑）
├── main.js             # 应用入口（Vue 实例初始化）
└── style.css           # 全局样式文件
```

### 模块职责说明

- **App.vue**：
  - 应用主容器，管理全局状态（todos、分类、搜索等）
  - 处理业务逻辑（增删改查、搜索、排序、批量操作）
  - 实现提醒通知功能（检测即将到期事项）
  - 数据持久化监听（自动保存到 localStorage）

- **Sidebar.vue**：
  - 分类导航栏，支持全部/工作/学习/生活筛选
  - 使用图标增强视觉效果

- **TodoItem.vue**：
  - 单个待办事项展示
  - 显示标题、描述、分类、优先级、创建时间、完成时间、截止日期
  - 根据截止日期状态显示视觉提醒（过期/即将到期）
  - 处理完成/删除/编辑/选择操作

- **TodoForm.vue**：
  - 添加/编辑待办事项表单
  - 表单验证（标题必填）
  - 支持标题、描述、分类、优先级、截止日期设置

- **storage.js**：
  - localStorage 封装
  - 提供 getTodos() 和 saveTodos() 方法
  - 错误处理（JSON 解析失败时返回空数组）

## 3. 需求细节与决策

### 待办事项字段设计
- **标题（title）**：必填，最大长度 100 字符，显示字符计数
- **描述（description）**：可选，最大长度 500 字符，支持多行文本
- **分类（category）**：可选，默认"生活"，支持工作/学习/生活三种分类
- **优先级（priority）**：可选，1-3 级（低/中/高），默认 1（低）
- **截止日期（dueDate）**：可选，格式 YYYY-MM-DD，用于提醒功能
- **完成状态（completed）**：布尔值，默认 false
- **创建时间（createdAt）**：ISO 格式时间戳，自动生成
- **完成时间（completedAt）**：ISO 格式时间戳，完成时自动记录
- **更新时间（updatedAt）**：ISO 格式时间戳，编辑时自动更新

### 已完成任务显示
- 已完成任务显示删除线样式（text-decoration: line-through）
- 透明度降低（opacity: 0.7）
- 不显示截止日期提醒（已完成的任务不再提醒）
- 在列表中正常显示，可通过筛选查看

### 任务排序逻辑
- **默认排序**：按创建时间升序（最新的在前）
- **可选排序方式**：
  - 按优先级排序（高优先级在前）
  - 按创建时间排序
  - 按截止日期排序（即将到期的在前，无截止日期的在后）
  - 按标题排序（字母顺序）
- **排序方向**：支持升序/降序切换

### 搜索功能
- 支持搜索标题和描述
- 实时搜索（输入即搜索）
- 不区分大小写
- 与分类筛选、排序功能组合使用

### 批量操作
- 支持多选待办事项（点击待办项切换选择状态）
- 批量完成：将选中的未完成事项标记为完成
- 批量删除：删除选中的事项
- 批量操作后自动清空选择

### 截止日期与提醒功能
- **截止日期设置**：使用 Ant Design Vue 的 DatePicker 组件
- **提醒规则**：
  - 检测 3 天内到期的未完成事项
  - 已过期事项显示红色标签和边框
  - 即将到期（3 天内）显示橙色标签和边框
  - 顶部显示提醒通知栏，列出所有即将到期的事项
- **视觉提醒**：
  - 过期事项：红色左侧边框 + 浅红色背景
  - 即将到期：橙色左侧边框
  - 状态标签：显示"已过期 X 天"、"今天到期"、"明天到期"、"X 天后到期"

### 数据持久化
- 使用 localStorage 存储，键名：`todo-list-data`
- 数据格式：JSON 数组
- 自动保存：使用 Vue 的 watch 监听 todos 变化，深度监听确保所有修改都能保存
- 错误处理：读取失败返回空数组，保存失败在控制台输出错误

## 4. AI 使用说明

### AI 工具
- **豆包**：设计样式
- **Cursor**：主要使用的 AI 编程助手

### 使用 AI 的环节

1. **UI界面设计**：
   - 根据相关功能设计样式

1. **样式代码片段生成**：
   - 初始项目结构搭建
   - 组件模板生成
   - 样式代码编写

### AI 输出的修改
- **日期处理**：AI 最初使用原生 Date，改为使用 Day.js 以获得更好的 API 和时区处理
- **提醒逻辑**：AI 给出的简单实现，增加了更细致的状态判断（今天/明天/过期天数）
- **样式设计**：AI 给出的基础样式，增加了更丰富的视觉反馈（边框、背景色、标签颜色）
- **通知组件**：AI 建议使用 closable，实际改为不可关闭但可自动隐藏，避免用户误操作

## 5. 运行与测试方式

### 本地运行

1. **安装依赖**：
```bash
npm install
# 或
pnpm install
```

2. **启动开发服务器**：
```bash
npm run dev
```
应用将在 `http://localhost:5173` 启动

3. **构建生产版本**：
```bash
npm run build
```
构建产物在 `dist/` 目录

4. **预览生产构建**：
```bash
npm run preview
```

### 已测试环境
- **Node.js**：v18
- **浏览器**：
  - Chrome 最新版本 ✅
- **操作系统**：
  - Windows 11 ✅

### 已知问题与不足

1. **数据同步**：
   - 当前仅支持单机使用，多设备间无法同步
   - 未来可考虑添加云同步功能（需要后端支持）

2. **数据备份**：
   - 没有导出/导入功能
   - 建议添加 JSON 导出和导入功能

3. **提醒通知**：
   - 当前仅页面内提醒，无浏览器通知（Notification API）
   - 未来可添加浏览器原生通知

4. **性能优化**：
   - 大量待办事项（1000+）时，列表渲染可能有性能问题
   - 可考虑虚拟滚动优化

5. **移动端适配**：
   - 当前响应式设计基本可用，但移动端体验可进一步优化
   - 触摸操作体验可改进

## 6. 总结与反思

### 如果有更多时间，你会如何改进？

1. **功能增强**：
   - 添加子任务功能（待办事项可包含子任务）
   - 添加标签系统（多标签支持）
   - 添加附件功能（图片、文件）
   - 添加评论/笔记功能

2. **用户体验**：
   - 添加拖拽排序功能
   - 添加键盘快捷键支持
   - 添加深色模式
   - 添加自定义主题

3. **数据管理**：
   - 添加数据导出/导入（JSON、CSV）
   - 添加数据统计（完成率、分类分布）
   - 添加数据备份到云端

4. **技术优化**：
   - 使用 TypeScript 增强类型安全
   - 添加单元测试和 E2E 测试
   - 使用 Pinia 进行状态管理（如果项目规模扩大）
   - 添加 PWA 支持（离线使用）

5. **后端集成**：
   - 添加用户认证
   - 多设备数据同步
   - 协作功能（共享待办列表）

### 这个实现的最大亮点是什么？

1. **完整的提醒系统**：
   - 智能检测即将到期和已过期事项
   - 多层次的视觉提醒（标签、边框、背景色）
   - 顶部通知栏汇总提醒信息
   - 用户体验友好，不会过度打扰

2. **良好的代码组织**：
   - 组件化设计，职责清晰
   - 工具函数封装，便于维护
   - 响应式数据管理，自动持久化


4. **现代化的技术栈**：
   - Vue 3 Composition API 提供更好的逻辑复用
   - Vite 提供极速的开发体验
   - Ant Design Vue 提供专业的 UI 组件

